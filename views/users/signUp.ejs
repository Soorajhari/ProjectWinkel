<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <title>Register</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <h2 class="fw-bold text-center mt-2">WINKEL</h2>
        <div
          class="col"
          style="display: flex; justify-content: center; align-items: center"
        >
          <div class="col-lg-4 border rounded h-100 mt-5">
            <form
              class="form-in"
              action="/signUp"
              method="post"
              id="register-form"
            >
              <h3>Create Account</h3>
              <div class="mb-3">
                <label for="username" class="form-label">Yourname</label>
                <input
                  type="text"
                  class="form-control shadow-sm"
                  id="username"
                  name="name"
                  onkeyup="validationname()"
                  placeholder="first and last name"
                />
                <span id="name-error" style="color: red"></span>
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control shadow-sm"
                  id="email"
                  name="email"
                  onkeyup="validationemail()"
                  placeholder="Email"
                />
                <span id="email-error" style="color: red"></span>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">mobile no:</label>
                <input
                  type="number"
                  class="form-control shadow-sm"
                  id="number"
                  name="mobile"
                  onkeyup="validationMobile()"
                  placeholder="Enter your mobile no:"
                />
                <span id="mobile-error" style="color: red"></span>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control shadow-sm"
                  id="password"
                  name="password"
                  onkeyup="validationPassword()"
                  placeholder="Atleast 6 characters"
                />
                <span id="password-error" style="color: red"></span>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">
                  Confirm Password</label
                >
                <input
                  type="password"
                  class="form-control shadow-sm"
                  id="confirm-password"
                  name="repassword"
                  onkeyup="validationConfirmPassword()"
                  placeholder="Renter your password"
                />
              </div>
              <span id="confirm-password-error" style="color: red"></span>
              <div id="form-error"></div>
              <div class="hero text-center my-3">
                <button type="submit" class="text-center">Signup</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <style>
      .form-in {
        background-color: #ffffff;
      }
      button {
        background-color: #f79327;
        border: none;
        border-radius: 10px;
      }
      input {
        border: 1px solid black;
      }
    </style>

    <script>
      //       const form = document.getElementById("register-form");

      // const namein = document.getElementById("name-error").value;
      // const emailin = document.getElementById("email").value;
      // const mobilein = document.getElementById("number").value;
      // const passwordin = document.getElementById("password").value;
      // const password2in = document.getElementById("repassword").value;

      function validationname() {
        const names = document.getElementById("username").value;
        const nameas = document.getElementById("name-error");

        if (names.trim().length === 0) {
          nameas.innerHTML = "Name is required";
          return false;
        }

        if (
          names.match(/^[a-zA-Z]+ [a-zA-Z]+$/) ||
          names.match(/^[a-zA-Z]+ [a-zA-Z]+ [a-zA-Z]+$/) ||
          names.match(/^[a-zA-Z]+$/)
        ) {
          nameas.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
          return true;
        }

        nameas.innerHTML = "Enter a valid name";
        return false;
      }

      function validationemail() {
        const emailon = document.getElementById("email").value;
        const emailas = document.getElementById("email-error");
        var inposition = emailon.indexOf("@");
        var outposition = emailon.indexOf(".");

        if (emailon.length == 0) {
          emailas.innerHTML = "Email is required";
          return false;
        }

        if (
          inposition < 1 ||
          outposition < inposition + 2 ||
          outposition + 2 > emailon.length
        ) {
          emailas.innerHTML = "write a valid email id";
          return false;
        }
        emailas.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }

      function validationMobile() {
        const mobile = document.getElementById("number").value;
        const mobileError = document.getElementById("mobile-error");

        if (mobile.trim().length === 0) {
          mobileError.innerHTML = "Mobile number is required";
          return false;
        }

        const mobileRegex = /^\d{10}$/;
        if (!mobileRegex.test(mobile)) {
          mobileError.innerHTML = "Please enter a valid 10-digit mobile number";
          return false;
        }

        mobileError.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }

      function validationPassword() {
        const password = document.getElementById("password").value;
        const passwordError = document.getElementById("password-error");

        if (password.trim().length === 0) {
          passwordError.innerHTML = "Password is required";
          return false;
        }

        const passwordRegex =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,20}$/;
        if (!passwordRegex.test(password)) {
          passwordError.innerHTML = "Please enter a valid password";
          return false;
        }

        passwordError.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }

      function validationConfirmPassword() {
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;
        const confirmPasswordError = document.getElementById(
          "confirm-password-error"
        );

        if (confirmPassword.trim().length === 0) {
          confirmPasswordError.innerHTML = "Confirm password is required";
          return false;
        }

        if (password !== confirmPassword) {
          confirmPasswordError.innerHTML = "Passwords do not match";
          return false;
        }

        confirmPasswordError.innerHTML =
          '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }
      const form = document.getElementById("register-form");
      form.addEventListener("submit", function (event) {
        event.preventDefault();
        if (validateForm()) {
          form.submit();
        } else {
          const errorMessage = document.getElementById("form-error");
          errorMessage.textContent = "Please fix the errors before submitting.";
        }
      });

      function validateForm() {
        const isNameValid = validationname();
        const isEmailValid = validationemail();
        const isMobileValid = validationMobile();
        const isPasswordValid = validationPassword();
        const isConfirmPasswordValid = validationConfirmPassword();

        if (
          isNameValid &&
          isEmailValid &&
          isMobileValid &&
          isPasswordValid &&
          isConfirmPasswordValid
        ) {
          return true;
        } else {
          return false;
        }
      }
    </script>
  </body>
</html>
