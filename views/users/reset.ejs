<!doctype html>
<html lang="en">
  <head>
    <!-- Title -->
    <title>Reset Password</title>

    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="public/img/favicon.ico" />

    <!-- Template -->
    <link
      rel="stylesheet"
      href="public/graindashboard/css/graindashboard.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>

  <body class="">
    <main class="main">
      <div class="content">
        <div class="container-fluid pb-5">
          <div class="row justify-content-md-center">
            <div class="card-wrapper col-12 col-md-4 mt-5">
              <div class="brand text-center mb-3">
                <h4>WINKEL</h4>
              </div>
              <div class="card">
                <div class="card-body shadow">
                  <h4 class="card-title">Reset Password</h4>
                  <form action="/forgetVerify" method="post">
                    <!-- <div class="form-group my-3 shadow-sm">
										<label for="email">E-Mail Address</label>
										<input id="email" type="email" class="form-control" name="email" required="" autofocus="">
									</div> -->

                    <div class="form-group my-3 shadow-sm">
                      <label for="password">Password </label>

                      <input
                        id="password"
                        type="password"
                        class="form-control"
                        name="password"
                        onkeyup="validationPassword()"
                      />
                      <span id="error-pass"></span>
                      <input
                        type="hidden"
                        name="user_id"
                        value="<%= user_id%>"
                      />
                    </div>

                    <div class="form-group my-3 shadow-sm">
                      <label for="password-confirm">Confirm Password </label>

                      <input
                        id="password-confirm"
                        type="password"
                        class="form-control"
                        name="password_confirmation"
                        onkeyup="validationConfirmPassword()"
                      />
                      <span id="error-passconf"></span>
                    </div>

                    <div class="form-group no-margin">
                      <button class="btn btn-primary" type="submit">
                        Reset Password
                      </button>
                    </div>
                  </form>
                </div>
              </div>
              <footer class="footer mt-3">
                <div class="container-fluid">
                  <div class="footer-content text-center small">
                    <span class="text-muted"
                      >&copy; 2023 WINKEL. All Rights Reserved.</span
                    >
                  </div>
                </div>
              </footer>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="public/graindashboard/js/graindashboard.js"></script>
    <script src="public/graindashboard/js/graindashboard.vendor.js"></script>
    <script>
      function validationPassword() {
        const password = document.getElementById("password").value;
        const passerror = document.getElementById("error-pass");
        if (password.trim().length === 0) {
          passerror.innerHTML = "Password is required";
          return false;
        }

        const passwordRegex =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,20}$/;
        if (!passwordRegex.test(password)) {
          passerror.innerHTML = "Please enter a valid password";
          return false;
        }
        passwordError.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }

      function validationConfirmPassword() {
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("password-confirm").value;
        const confirmPasswordError = document.getElementById("error-passconf");

        if (confirmPassword.trim().length === 0) {
          confirmPasswordError.innerHTML = "Confirm password is required";
          return false;
        }

        if (password !== confirmPassword) {
          confirmPasswordError.innerHTML = "Passwords do not match";
          return false;
        }

        confirmPasswordError.innerHTML =
          '<i class="fa-solid fa-circle-check"></i>';
        return true;
      }
    </script>
  </body>
</html>
